<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./drumKitStyle.css">
    <title>JSDrumKit</title>
</head>
<body>
    <div class='keys'>
        <div data-key='65' class='key'>
            <kbd>A</kbd>
            <span>Boom</span>
        </div>
        <div data-key='83' class='key'>
            <kbd>S</kbd>
            <span>Clap</span>
        </div>
        <div data-key='68' class='key'>
            <kbd>D</kbd>
            <span>Hihat</span>
        </div>
        <div data-key='70' class='key'>
            <kbd>F</kbd>
            <span>Kick</span>
        </div>
        <div data-key='71' class='key'>
            <kbd>G</kbd>
            <span>Openhat</span>
        </div>
        <div data-key='72' class='key'>
            <kbd>H</kbd>
            <span>Ride</span>
        </div>
        <div data-key='74' class='key'>
            <kbd>J</kbd>
            <span>Snare</span>
        </div>
        <div data-key='75' class='key'>
            <kbd>K</kbd>
            <span>Tink</span>
        </div>
        <div data-key='76' class='key'>
            <kbd>L</kbd>
            <span>Tom</span>
        </div>
    </div>

    <audio data-key='65' src='./sounds/boom.wav'></audio>
    <audio data-key='83' src='./sounds/clap.wav'></audio>
    <audio data-key='68' src='./sounds/hihat.wav'></audio>
    <audio data-key='70' src='./sounds/kick.wav'></audio>
    <audio data-key='71' src='./sounds/openhat.wav'></audio>
    <audio data-key='72' src='./sounds/ride.wav'></audio>
    <audio data-key='74' src='./sounds/snare.wav'></audio>
    <audio data-key='75' src='./sounds/tink.wav'></audio>
    <audio data-key='76' src='./sounds/tom.wav'></audio>
    
    <script>

        function playSound(event){
            console.log(event.keyCode);
            const audio = document.querySelector(`audio[data-key="${event.keyCode}"]`);
            const keyDiv = document.querySelector(`.key[data-key="${event.keyCode}"]`);
            if(!audio) return;
            audio.currentTime = 0;
            keyDiv.classList.add('playing')
            audio.play();
        }

        function removeTransition(event){
            if(event.propertyName!='transform') return;
            console.log(event);
            this.classList.remove('playing');
        }

        const keys = document.querySelectorAll('.key')
        keys.forEach(key => key.addEventListener('transitionend', removeTransition));

        window.addEventListener("keydown", playSound);
        
    </script>
</body>
</html>